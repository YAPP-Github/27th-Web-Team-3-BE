# 협업 규칙

## 개발 프로세스

### 1. 사전 준비
- **공통 유틸리티 확인**: 구현 전 기존 공통 유틸리티가 있는지 확인하고 재사용 가능한 코드를 파악합니다.
- **의존성 검토**: 필요한 라이브러리나 모듈이 이미 프로젝트에 존재하는지 확인합니다.

### 2. 테스트 주도 개발 (TDD)
프로젝트는 **ATDD(Acceptance Test Driven Development)** 방식을 기본으로 합니다.

⚠️ **테스트 범위 제한**: 
- **필수**: ATDD 기반 API 인수 테스트만 작성
- **허용**: 구현 전 빌드 테스트 (`cargo build`, `cargo check`)
- **금지**: 불필요한 단위 테스트, 통합 테스트, 기타 부가적인 테스트는 작성하지 않음

#### ATDD 프로세스
1. **모든 API 인수 테스트 작성** - 구현 전에 API의 예상 동작을 테스트 코드로 작성
2. **구현** - 테스트를 통과하도록 실제 기능 구현
3. **모든 API 테스트 실행** - 구현 후 전체 테스트 실행하여 검증
4. **리팩토링** - 테스트가 통과하면 코드 개선

#### TDD 원칙
- 테스트 코드를 먼저 작성하고, 구현 코드를 작성합니다.
- 테스트가 실패하는 것을 확인한 후 구현을 시작합니다.
- 최소한의 코드로 테스트를 통과시킵니다.
- 리팩토링 시에도 테스트가 계속 통과하는지 확인합니다.

### 3. API 구현 후 문서화

API 구현이 완료되면 반드시 `docs/` 디렉토리에 API 문서를 작성합니다.

⚠️ **중요**: README나 기타 문서는 작성하지 않습니다. **오직 API 문서만** 작성합니다.

#### 문서 작성 규칙
- **파일명**: `docs/{api_name}.md` 형식으로 생성
- **문서 내용**: 다음 항목을 반드시 포함

```markdown
# API 이름

## 개요
API에 대한 간단한 설명

## 요청 (Request)
- Method: GET/POST/PUT/DELETE
- Endpoint: /api/...
- Headers:
  - Content-Type: application/json
- Body (JSON):
  ```json
  {
    "field": "value"
  }
  ```

## 응답 (Response)
### 성공 (200 OK)
```json
{
  "status": "success",
  "data": {}
}
```

### 실패 (4xx/5xx)
```json
{
  "status": "error",
  "message": "에러 메시지"
}
```

## 구현 세부사항
구현하면서 처리한 내용:
- 사용한 핸들러/미들웨어
- 적용한 비즈니스 로직
- 에러 처리 방식
- 사용한 공통 유틸리티
- 주요 의사결정 사항

## 테스트
수행한 API 인수 테스트 목록:
- [ ] 정상 케이스 테스트
- [ ] 잘못된 요청 테스트 (Bad Request)
- [ ] 인증/인가 테스트 (해당되는 경우)

### 테스트 코드 위치
`tests/{api_name}_test.rs`

### 테스트 실행 방법
```bash
cargo test {api_name}
```

⚠️ **주의**: 위의 API 인수 테스트만 작성하고, 불필요한 단위 테스트나 기타 테스트는 작성하지 않습니다.
```

## 4. 코드 리뷰 체크리스트
- [ ] TDD 원칙을 따라 테스트 코드가 먼저 작성되었는가?
- [ ] 모든 테스트가 통과하는가?
- [ ] API 문서가 `docs/` 디렉토리에 작성되었는가?
- [ ] 공통 유틸리티를 재사용했는가?
- [ ] 에러 처리가 적절하게 되어 있는가?
- [ ] 코드가 Rust 컨벤션을 따르는가?
- [ ] 불필요한 의존성이 추가되지 않았는가?

## 5. 커밋 메시지 규칙
```
[타입] 간단한 설명

상세 설명 (선택사항)
```

### 타입
- `feat`: 새로운 기능 추가
- `fix`: 버그 수정
- `test`: 테스트 코드 추가/수정
- `docs`: 문서 작성/수정
- `refactor`: 코드 리팩토링
- `chore`: 빌드 설정, 패키지 매니저 설정 등

### 예시
```
[feat] 헬스체크 API 추가

- GET /health 엔드포인트 구현
- 서버 상태 확인 기능 추가
- 관련 테스트 코드 작성
- docs/health.md 문서 작성
```

## 6. 브랜치 전략
- `main`: 프로덕션 준비 완료 코드
- `develop`: 개발 중인 코드
- `feature/{기능명}`: 새로운 기능 개발
- `fix/{버그명}`: 버그 수정

## 7. 코드 스타일
- Rust 표준 포맷터 사용: `cargo fmt`
- Linter 통과: `cargo clippy`
- 경고 없이 빌드: `cargo build --all-features`

## 8. 작업 순서 요약
1. 공통 유틸리티 확인
2. API 테스트 코드 작성 (ATDD)
3. 구현
4. 전체 테스트 실행 및 검증 (서버 실행 후 /health 체크가 되면 그 다음 진행하면 됨)
5. `docs/{api_name}.md` 문서 작성
6. 코드 리뷰 체크리스트 확인
7. 커밋 & 푸시

