# API-015 참석 등록

> `POST /api/v1/retrospects/{retrospectId}/participants`

---

## Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant S as Server
    participant DB as Database

    C->>S: POST /retrospects/{id}/participants
    Note right of C: JWT에서 유저 정보 추출
    S->>S: accessToken 검증
    S->>DB: 팀 멤버 확인
    alt 멤버 권한
        S->>S: 회고 시작 전인지 확인
        alt 예정된 회고
            S->>DB: 중복 참석 확인
            alt 신규 참석
                S->>DB: 참석자 등록
                S-->>C: participantId, memberId, nickname
            else 이미 참석
                S-->>C: RETRO4091 에러
            end
        else 이미 시작/종료
            S-->>C: RETRO4002 에러
        end
    else 권한 없음
        S-->>C: TEAM4031 에러
    end
```

---

## Quick Reference

| 항목 | 값 |
|------|-----|
| **Method** | POST |
| **Auth** | accessToken (Bearer) |
| **Body** | 없음 (JWT에서 추출) |

---

## Response

```json
{
  "isSuccess": true,
  "code": "COMMON200",
  "message": "회고 참석자로 성공적으로 등록되었습니다.",
  "result": {
    "participantId": 5001,
    "memberId": 123,
    "nickname": "제이슨"
  }
}
```

---

## Error Codes

| Code | Status | 설명 |
|------|--------|------|
| COMMON400 | 400 | 잘못된 retrospectId |
| RETRO4002 | 400 | 과거/진행중 회고 |
| AUTH4001 | 401 | 인증 실패 |
| TEAM4031 | 403 | 팀 멤버가 아님 |
| RETRO4041 | 404 | 존재하지 않는 회고 |
| RETRO4091 | 409 | 이미 참석 등록됨 |

---

## Related

- [[API-016 참여자 조회]]
- [[API-017 임시 저장]]

---

#retrospect #participant #api
