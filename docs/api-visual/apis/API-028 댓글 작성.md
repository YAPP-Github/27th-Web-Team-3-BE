# API-028 댓글 작성

> `POST /api/v1/responses/{responseId}/comments`

---

## Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant S as Server
    participant DB as Database

    C->>S: POST /responses/{id}/comments
    Note right of C: content
    S->>S: accessToken 검증
    S->>DB: 팀 멤버 확인
    alt 멤버 권한
        S->>S: 내용 유효성 검증
        alt 유효한 내용
            S->>DB: 댓글 저장
            S-->>C: commentId, createdAt
        else 길이 초과
            S-->>C: RES4001 에러
        end
    else 권한 없음
        S-->>C: TEAM4031 에러
    end
```

---

## Quick Reference

| 항목 | 값 |
|------|-----|
| **Method** | POST |
| **Auth** | accessToken (Bearer) |
| **Content-Type** | application/json |

---

## Request Body

```json
{
  "content": "이 부분 정말 공감되네요! 고생 많으셨습니다."
}
```

| Field | Type | Required | Validation |
|-------|------|----------|------------|
| content | string | Yes | 1~200자, 공백만 불가 |

---

## Response

```json
{
  "isSuccess": true,
  "code": "COMMON200",
  "message": "댓글이 성공적으로 등록되었습니다.",
  "result": {
    "commentId": 789,
    "responseId": 456,
    "content": "이 부분 정말 공감되네요! 고생 많으셨습니다.",
    "createdAt": "2026-01-24T15:48:21"
  }
}
```

---

## Error Codes

| Code | Status | 설명 |
|------|--------|------|
| COMMON400 | 400 | content 누락 또는 빈 값 |
| RES4001 | 400 | 댓글 길이 초과 (200자) |
| AUTH4001 | 401 | 인증 실패 |
| TEAM4031 | 403 | 팀 멤버가 아님 |
| RES4041 | 404 | 존재하지 않는 답변 |

---

## Related

- [[API-027 댓글 조회]]
- [[API-026 좋아요 토글]]

---

#social #comment #create #api
